---
title: "Note"
date: 2019-12-30
tag: ["Note"]
---

#### includes 메서드  

  배열에 특정 요소가 있는지 판별한 후 True/False를 반환한다.

  ```javascript
  const arr = [1, 2, 3, 4, "incl"];  
  arr.includes(3) -> True  
  arr.includes("incl") -> True  
  ```
  
<br />

#### split 메서드  

  String 객체를 지정한 구분자를 이용하여 여러 개의 문자열로 나눈다.
  
  ```javascript
  const arr = "I love programming";  
  arr.split(' ') -> ["I", "love", "programming"]  
  ```

  <br />

#### join 메서드  

  배열의 모든 요소들을 지정한 구분자를 이용하여 하나의 문자열로 만든다.
  
  ```javascript
  ex) const arr = ["I", "love", "programming"];  
  arr.join('') -> "I,love,programming"  
  arr.join(' ') -> "I love programming"  
  arr.join('-') -> "I-love-programming"  
  ```
  
<br />

#### sort 메서드  

  배열의 요소를 적절하게 정렬한 후 배열을 반환하는 것이지만 여기서는 오름차순으로 배열하는 법과 내림차순으로 배열하는 법을 설명한다. 
  
  ```javascript
  ex) const arr = [2, 4, 1, -5, 3];  
  arr.sort((a, b) => a - b) -> [-5, 1, 2, 3, 4]  
  arr.sort((b, a) => b - a) -> [4, 3, 2, 1, -5]  
  cf) "a - b > 0" 이면 배열에서 a, b의 자리를 바꾸는 메서드라고 보면 된다.  
  ```  

  cf) 참고로 문자 character도 대소 비교가 가능하다.  
  예를 들어, `a < b < c < d < ... < y < z` 이다.

#### sort 메서드에 대한 조금 더 깊은 이해

- 배열 arr = [2, 3, 1, 5, 4] 가 있다고 가정하자.
- arr.sort((a, b) => a - b)는 배열 arr을 오름차순 [1, 2, 3, 4, 5]로 만든다.
- 이 과정을 깊게 살펴보면, 먼저 sort가 처음 돌때, (a, b)는 (2, 3)을 의미한다. a=2, b=3. 그리고 함수의 내용이 1보다 크면 (a, b)를 (b,a로 바꿔주는 역할을 하는 것이 sort이다.
- 즉, 2 - 3 = -1로 1보다 작기때문에 (a, b)의 위치는 바뀌지 않는다.
- 다음으로 sort가 돌면, 다시 처음부터 (2, 3)에 대해 판단을 하고 위의 경우에서 보았듯이 자리는 그대로 놥둔다. 이제 (a, b)는 (3, 1이된다. 3 - 1은 2이므로 1보다 크기 때문에 (a, b)의 위치는 (b, a)로 바뀌어서 이 시점에서의 arr은 [2, 1, 3, 5, 4]가 된다.
- 이제 다시 또 다음으로 sort가 돌면, 처음의 (2, 1)에 대해 이 두 수는 1보다 큰 값을 반환하므로 자리가 바뀌고 [1, 2, 3, 5, 4]가 된다.
- 이제 다시 또 다음으로 sort가 돌면, 배열 arr의 앞의 [1, 2, 3] 은 위의 경우처럼 넘어가고 (3, 5)에 대한 판단을 한다.
- 이런식으로 sort는 계속 배열 arr을 돌면서 원소들을 정렬한다.
- 그러므로, arr.sort((a, b) => "함수의 내용") 으로 함수의 내용을 우리가 만들고 그 반환값을 1, -1, 0 으로 정해줌으로써 조건에따른sort를 가능하게 한다. 아래는 이에대한 예시이다.

    ```javascript
    failureRate = failureRate.map((v, i) => v = { rate: v, index: i+1 });
    failureRate.sort((a, b) => {
      return a.rate > b.rate ? -1 :
      a.rate < b.rate ? 1 :
      a.rate == b.rate ?
        a.index < b.index ? -1 :
        a.index > b.index ? 1 : 0 :
      0;
    });
    ```

<br />

#### trim 메서드  

  문자열 양 쪽 끝의 공백을 제거해주는 메서드이다.
  
  ```javascript
  ex) const arr = "　　　Hello　　　";  
  arr.trim() -> "Hello"
  ```

<br />

#### 몫 구하기  

  JavaScript에서 몫을 구하기 위해서는 그냥 a/b 하면 안되고, parseInt()를 사용해야 한다.  
  예를들면, 12 / 5 = 2.4 가 나오지만 parseInt(12 / 5, 10)으로 하면 2가 나오게 된다.  
  참고로 위의 예시 parseInt(x / y, d)에서 d = 10은 10진수를 의미한다.

<br />

#### 숫자 합치기  

  JavaScript에서 여러 숫자를 하나로 합치는 방법은, 10 + ‘’ + 5 = “105” 이것과 같이 하면 된다.  
  그리고 이걸 다시 숫자로 바꾸려면, +(10 + ‘’ + 5) = 105 로 하면 된다.

<br />

#### 객체를 담은 배열에서 객체의 프로퍼티를 조건에 맞게 변경하는 방법  

  객체를 담은 배열 arr = [{...}, {...}, ... ]에서, arr 의 객체 프로퍼티를 변경하는 방법은 .map 메서드와 삼항연산자를 이용하여 조건을 부여한 후 바꾸면 된다.  
  
  ```javascript
  arr: arr.map((v) => (v.property == condition ? v : { …v, prop: v.prop + 1 }))
  ```

<br />

#### 함수에서 발생하는 에러를 해결하기 위한 5가지 step  

  1. 함수 안에 들어가는 x 값에 문제는 없는가
  2. 함수에 x 값이 제대로 잘 들어갔는가
  3. 함수 안에서 x 값이 잘 처리되고 있는가
  4. 함수를 통해 처리된 x 값의 결과물 y가 함수 바깥으로 나오는 과정에 문제는 없는가
  5. 결과물 y가 제대로 잘 return 되었는가

<br />

#### 배열에서 조건에 맞는 원소가 몇개인지 확인하는 방법  
  
  ```javascript
  arr.filter((v) => 조건식).length;
  ```

<br />

#### 배열을 객체로 만드는 방법  

  배열 result=[…]에 대해서
  
  ```javascript
  result = result.map(v, i) => ({ index: i, value: v });
  ```

  cf) 위의 예시 .map((v, i))에서 map의 두번째 인자 i는 index를 의미한다. 위와 같이 설정하면 자동으로 index값을 0 부터 넣어준다.

<br />
  
#### ESLint 사용하는 법

- VSCode에서 ESLint 확장 프로그램을 설치한다.
- $ npm i eslint
- $ npx eslint --init
- eslintrc.js에서 rules에 .js, .jsx 확장자 무시하도록 설정한다.  
  -> "react/jsx-filename-extension": [1, { "extensions": [".js", ".jsx"] }],

<br />

#### JavaScript 올림, 내림, 반올림 메서드

- Math.floor() 메서드  
  소숫점 아래 부분을 내림하여 정수만 남기는 메서드이다.
  
  ```javascript
  Math.floor(5.64) -> 5
  Math.floor(3.99) -> 3
  Math.floor(-5.33) -> -6
  ```

- Math.round() 메서드  
  소숫점 아래 부분을 반올림하여 정수만 남기는 메서드이다.

  ```javascript
  Math.round(5.95) -> 6
  Math.round(5.5) -> 6
  Math.round(5.45) -> 5
  Math.round(-5.75) -> -6
  Math.round(-5.05) -> -5
  ```

- Math.ceil() 메서드  
  소숫점 아래 부분을 올림하여 정수만 남기는 메서드이다.
  
  ```javascript
  Math.ceil(0.95) -> 1
  Math.ceil(7.01) -> 8
  Math.ceil(-5.95) -> 5
  Math.ceil(-9.01) -> 9
  ```

<br />

#### JavaScript 객체 프로퍼티 추출과 관련된 메서드  
  
  ```javascript
  const example = {
    id: 'woogod',
    sex: 'male',
    contents: 'what'
  }

  Object.entries(example)  
    -> "id: woogod", "sex: male", "contents: what"
  Object.keys(example)
    -> ["id", "sex", "contents"]
  Object.values(example)
    -> ["woogod", "male", "what"]
  ```

<br />

#### Math.sqrt 메서드  

  제곱근을 반환해주는 메서드이다.

  ```javascript
  Math.sqrt(121) -> 11
  Math.sqrt(9) -> 3
  Math.sqrt(122) -> 11.045361
  ```

<br />

#### substr 메서드  

  String.substr(a, b) 문자열 추출 메서드. 인덱스 a에서부터 b개 만큼 잘라서 반환.

  ```javascript
  const arr = [1, 2, 3, 4, 5];
  arr.substr(1,3) -> [2, 3, 4]
  ```

<br />

#### slice와 splice 메서드  

  지금까지 slice와 splice의 차이는 원본 배열을 건드리냐 아니냐의 차인줄 알고 slice를 splice 처럼 쓰려고 했으나 들어가는 인자값이 다르다는 것을 알게되었다.  
  먼저, Array.splice(n, m)은 원본배열 Array를 변형시키며, n번째 인덱스에서부터 m개 만큼 제거한다.  
  Array.slice(n, m)은 원본배열 Array를 변형시키지 않으며, n번째 인덱스에서부터 m번째 인덱스 `전까지` 제거하여 반환한다.  
  쉽게 예시를 보자,

  ```javascript
  const arrSplice = ['A', 'B', 'C', 'D', 'E'];
  const arrSlice = ['A', 'B', 'C', 'D', 'E'];

  const forSplice = arrSplice.splice(1, 3);
  const forSlice = arrSlice.slice(1, 3);

  console.log(forSplice) -> ['B', 'C', 'D']
  console.log(arrSplice) -> ['A', 'E']
  
  // arrSlice[1]에서부터 arr.slice[3]전까지 -> B ~ C까지(D 전까지)
  console.log(forSlice) -> ['B', 'C']
  console.log(arrSlice) -> ['A', 'B', 'C', 'D', 'E']
  ```

<br />

#### 삼항연산자와 "&&"  
  
  ```javascript
  const a = 1;
  const b = 2;
  const answer = [];

  // 만약 a가 b보다 작은 경우 answer배열에 그 값을 넣고 싶다면,
  a < b ? answer.push(a) : ''; // 참일 경우 a값을 삽입, 아닐경우 아무 값 반환.
  // 하지만 이렇게 하는 것보다 논리연산자 "&&"을 사용하는 것이 더 명시적이다.
  a < b && answer.push(a);
  ```

<br />
  
#### 10진수 x를 y진수로 바꾸는 법 : x.toString(y)  

  예를 들어, 10진수 5를 3진수로 바꾸려면,

  ```javascript
  const value = 5;
  const changedNum = value.toString(3)
  console.log(changedNum) -> "12"
  ```

<br />

#### x진수로 쓰여진 value가 10진수로 얼마인지 판단하는 법 : parseInt(value, x)  

  예를 들어 2진수로 쓰여진 1010을 10진수로 보려면,

  ```javascript
  const value = 1010;
  const changedNum = parseInt(value, 2);
  console.log(changedNum) -> 10
  ```

<br />

#### 문자를 아스키코드로, 아스키코드를 문자로 변환하는 메서드  
  
  ```javascript
  const a = "a";
  
  // character → ASCII
  a.charCodeAt(0) -> 97

  // ASCII → character
  String.fromCharCode(97) -> "a"
  ```<br />

#### 자릿수를 맞춰주는 메서드 : padStart()

```javascript
const num = '1';
num.padStart(3, '0') -> '001'
num.padStart(4, '*') -> '***1'
```

<br />

#### Map 객체

```javascript
const map = new Map();
const id = 'userID';
let name;

name = 'apple';
map.set(id, name); -> userID: 'apple'

name = 'banana';
map.set(id, name); -> userID: 'banana;

map.get(id) -> 'banana'
```

<br />

#### 배열에서 가장 큰 값을 찾는 법

  ```javascript
  const arr = [1, 2, 3, 4, 5];
  Math.max(...arr) -> 5
  ```

<br />

#### AWS S3 배포하기

- AWS 홈페이지에 들어간다.
- AWS Management Console로 들어간다.
- Find Services에서 'S3'를 검색한다.
- Create bucket 버튼 클릭
- Bucket name 작성, Region은 Asia Pacific(Seoul) ap-northeast-2
- Bucket settings for Block Public Access를 off, off, on, on으로 한다.  
Block public access to buckets and objects granted through new public bucket or access point policies (check)  
Block public and cross-account access to buckets and objects through any public bucket or access point policies (check)  
- Create bucket 완료
- 이제 그 bucket으로 들어가서 Upload 버튼 클릭
- Add files에서 dist 디렉토리 안에 있는 것들(bundle된 파일들)을 모두 업로드한다.
- 이제 그 파일들을 클릭하면 url이 나오는데 이를 클릭하면 파일의 내용이 나온다. 이미지 파일의 경우 클릭하면 이미지가 브라우저에 출력된다. 즉, 파일에 접근할 수 있게된다.
- 이제 Properties 탭으로 가서 Static website hosting을 클릭한다.
- Use this bucket to host a website (check)
- Index document : index.html
- Error document : index.html
- Save 버튼 클릭.
- 이제 정적 웹 사이트가 배포되었다.

<br />

- 다시 AWS Management Console로 돌아가서 Find Services에서 'IAM'을 검색한다.
- 왼쪽에 Access management에서 Users 탭 클릭.
- Add user 클릭
- User name 작성 (기존에 admin으로 했었음)
- Select AWS access type으로 Programmatic access (check)
- Set permissions에서 AdministratorAccess (check)
- Add tags는 스킵 Next: Review
- Creat User
- 이제 Access key ID와 Secret access key는 잘 적어놓고 보안에 철저히 한다.

<br />

- 터미널을 연다.
- AWS CLI를 다운로드한다.
- $ aws --version 으로 잘 설치되었는지 확인한다.
- $ aws 로 aws를 실행시킨다. (aws 디렉토리로 이동됨)
- $ aws configure
- 이제 아까 적어놓았던 Access Key ID와 Secret Access Key를 입력하고, region name에는 ap-northeast-2를 적는다. Default output format은 엔터치고 넘어간다.
- 이제 배포하고자 하는 파일이 있는 디렉토리로 넘어간다.
- 나의 경우는 FrontEnd파일로 넘어갔다. 그리고 그 디렉토리에서
- $ aws s3 cp dist s3://[your bucket name] --recursive --acl public-read
- [your bucket name] 대신에 내가 아까 생성했던 bucket의 이름을 넣으면 된다.
  
<br />

- 이제 내가 배포하고자 하는 프로젝트를 툴로 열자.
- 루트 폴더에 deploy.sh 파일을 생성한다.
- npm run build  
  aws s3 cp dist s3://[your bucket name] --recursive --acl public-read  
  를 작성한다.
- 이제 프로젝트 콘솔에서 $ sh deploy.sh 명령어를 입력하면 알아서 빌드하고 배포한다.

#### EC2로 API 배포하기

- Dockerfile 만들어서 docker image 만들고, 컨테이너에 올려서 띄워보고, 구동했을 때 브라우저에서 잘 작동하는지 확인한다.
- listening port 잘 확인해서 docker로 열어준 port랑 일치하도록 한다.
- 잘 작동하면 이제 이걸 배포할 준비가 되었다.
- image를 docker hub에 올린다.
- 이제 ec2 가상머신에다가 docker hub에서 이미지 올렸던 것을 받아온다. 실행한다. 끝
- 터미널에서 .ssh 디렉토리로 간 뒤 EC2 가상머신과 연결한 후,
- EC2 안에서 docker에 로그인한다.
- EC2 사이트 인바운드 규칙에서 사용자 설정으로 포트를 열어준다.
- 클라이언트와 서버 연결하는 코드를 적절히 수정해서 연결을 마친다.

#### AWS S3 403 error

- 버킷 권한을 다 비활성화 해주고, 버킷정책을 생성하였다.
